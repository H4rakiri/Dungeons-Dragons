# Генератор Деревенских Домов

```dataviewjs
// Функция для получения случайного элемента из массива
function getRandomElement(array) {
    return array[Math.floor(Math.random() * array.length)];
}

// Типы домов
const houseTypes = [
    "небольшой деревянный дом с соломенной крышей",
    "просторный бревенчатый дом с чердаком",
    "старый деревянный дом с пристройкой",
    "крепкий каменный дом с подвалом",
    "уютный глинобитный дом с печью",
    "двухэтажный деревянный дом с верандой",
    "простой дом с большим огородом",
    "добротный дом с хозяйственными постройками",
    "деревянный дом с мансардой",
    "приземистый дом с широким крыльцом",
    "дом с голубятней",
    "дом с винным погребом",
    "дом с башенкой",
    "дом с прудом во дворе",
    "дом с мастерской резчика",
    "дом с летней верандой",
    "дом с плетёным забором",
    "дом с большим чердаком",
    "дом с каменной лестницей",
    "дом с зелёной крышей",
    "дом с навесом для дров",
    "дом с уличной печью",
    "дом с цветущим садом",
    "дом с фонтаном во дворе",
    "дом с амбаром и сеновалом",
    "дом с кузницей",
    "дом с библиотекой",
    "дом с магическим кругом на полу",
    "дом с тайным подземельем",
    "дом с живой изгородью"
];

// Состояния домов
const houseConditions = [
    "хорошо ухоженный и поддерживаемый в порядке",
    "немного обветшалый, но крепкий",
    "недавно отремонтированный",
    "требующий небольшого ремонта",
    "старый, но добротный",
    "с недавно перекрытой крышей",
    "с подновлённым забором",
    "с свежевыкрашенными ставнями",
    "с потемневшими от времени стенами",
    "с заросшим палисадником",
    "с трещинами в фундаменте",
    "с покосившейся верандой",
    "с облупившейся краской",
    "с новыми окнами",
    "с укреплённой дверью",
    "с цветущими кустами у входа",
    "с выложенной камнем дорожкой",
    "с резными наличниками",
    "с глиняной трубой",
    "с деревянными ставнями",
    "с лозой, оплетающей стены",
    "с мхом на крыше",
    "с гнездом ласточек под крышей",
    "магически защищённый",
    "покрытый рунами",
    "с обугленными балками после пожара",
    "с трещинами от землетрясения",
    "с обвалившейся частью крыши",
    "с окнами, заколоченными досками"
];

// Профессии владельцев
const ownerTypes = [
    { profession: "фермер", details: "выращивает лучшие овощи в округе" },
    { profession: "скотовод", details: "разводит домашний скот и знает толк в сыре" },
    { profession: "пчеловод", details: "держит несколько ульев за домом и варит медовуху" },
    { profession: "садовод", details: "выращивает редкие сорта цветов и фруктов" },
    { profession: "охотник", details: "знает все тропы в окрестном лесу и мастерски стреляет из лука" },
    { profession: "рыбак", details: "ловит рыбу в местной реке и рассказывает байки" },
    { profession: "плотник", details: "известен своим мастерством в работе с деревом и резьбой" },
    { profession: "пекарь", details: "печёт самый вкусный хлеб и пироги в деревне" },
    { profession: "сапожник", details: "чинит обувь всем жителям и любит рассказывать истории" },
    { profession: "ткач", details: "делает прочные ткани и вышивает узоры" },
    { profession: "гончар", details: "создаёт красивую и практичную посуду" },
    { profession: "кузнец", details: "ковал оружие для местного ополчения и подковывает лошадей" },
    { profession: "травник", details: "собирает целебные травы и варит зелья" },
    { profession: "мельник", details: "держит единственную мельницу в округе и знает все слухи" },
    { profession: "столяр", details: "делает мебель на заказ и любит резьбу по дереву" },
    { profession: "шорник", details: "изготавливает сбрую для лошадей и ремни" },
    { profession: "колесник", details: "чинит телеги и делает колёса" },
    { profession: "бондарь", details: "делает бочки и кадки для всей деревни" },
    { profession: "староста", details: "знает все новости и хранит порядок" },
    { profession: "учитель", details: "обучает детей грамоте и любит книги" },
    { profession: "лекарь", details: "лечит травами и молитвами" },
    { profession: "странник", details: "редко бывает дома, но всегда приносит диковинки" },
    { profession: "коллекционер", details: "собирает редкие предметы и любит рассказывать о них" },
    { profession: "маг", details: "проводит эксперименты и хранит магические секреты" },
    { profession: "алхимик", details: "варит зелья и собирает редкие ингредиенты" },
    { profession: "бард", details: "поёт песни и собирает легенды" },
    { profession: "кулинар", details: "готовит необычные блюда и угощает гостей" },
    { profession: "ювелир", details: "делает украшения и коллекционирует драгоценности" },
    { profession: "писарь", details: "ведёт летописи и пишет письма для односельчан" }
];

const houseContents = [
    // Мебель и обстановка
    "простая деревянная мебель, сделанная местным плотником",
    "большая печь с лежанкой и чугунками",
    "старинный бабушкин комод с семейными реликвиями",
    "длинный обеденный стол со скамьями",
    "сундуки с одеждой и припасами",
    "резной буфет с посудой",
    "старинное кресло-качалка",
    "деревянная кровать с периной",
    "шкаф с семейным фарфором",
    "стол с выдвижными ящиками",
    // Хозяйственная утварь
    "полки с глиняной посудой и горшками",
    "развешанные под потолком травы и овощи",
    "прялка в углу и моток пряжи",
    "инструменты для работы в поле и огороде",
    "корзины с собранным урожаем",
    "деревянные бочки с соленьями",
    "полки с банками варенья",
    "сушилка для трав и грибов",
    "ткацкий станок",
    "гончарный круг",
    // Особые предметы
    "старинные семейные портреты на стенах",
    "коллекция необычных камней на подоконнике",
    "старая карта местности на стене",
    "семейная библия с записями нескольких поколений",
    "странный амулет, передающийся по наследству",
    "старинные часы с боем",
    "коллекция старых монет",
    "альбом с фотографиями предков",
    "старинный сундук с документами",
    "резной шкафчик с реликвиями"
];

const houseFeatures = [
    // Хозяйственные особенности
    "большой погреб с запасами на зиму",
    "просторный чердак с сундуками",
    "уютная кухня с очагом",
    "мастерская в пристройке",
    "теплый хлев для скотины",
    "летняя кухня во дворе",
    "коптильня за домом",
    "колодец с журавлем",
    "баня на заднем дворе",
    "сарай с инструментами",
    // Детали быта
    "половики ручной работы на полу",
    "занавески с вышивкой на окнах",
    "старые фотографии в рамках",
    "часы с кукушкой на стене",
    "коллекция глиняных горшков на полках",
    "вышитые подушки на лавках",
    "вязаные салфетки на столе",
    "старинные подсвечники",
    "резные деревянные ложки",
    "плетеные корзины",
    // Особые черты
    "старый колодец во дворе",
    "пышный сад за домом",
    "ухоженный огород с грядками",
    "пасека на заднем дворе",
    "травяной садик у крыльца",
    "фруктовый сад",
    "виноградник",
    "цветочные клумбы",
    "альпийская горка",
    "беседка в саду"
];

const houseSecrets = [
    // Семейные тайны
    "старые письма на чердаке",
    "семейная реликвия в сундуке",
    "дневник прадеда в комоде",
    "карта с отметками в старой книге",
    "спрятанные сбережения",
    "завещание с неожиданными условиями",
    "родословная книга семьи",
    "старинные документы о владении землей",
    "письма от давно потерянного родственника",
    "семейные предания в старых записях",
    // Находки
    "старинная монета под половицей",
    "необычный камень в основании печи",
    "странные знаки на балках чердака",
    "забытый тайник в подвале",
    "старинный инструмент неизвестного назначения",
    "клад с монетами прошлого века",
    "старая карта сокровищ",
    "древний амулет в стене",
    "забытый подземный ход",
    "тайная комната за шкафом"
];

const houseEvents = [
    // Бытовые события
    "подготовка к сбору урожая",
    "консервация овощей на зиму",
    "починка крыши перед дождями",
    "выпечка хлеба для всей семьи",
    "стирка и развешивание белья",
    "покраска забора",
    "ремонт сарая",
    "подготовка огорода к зиме",
    "заготовка дров",
    "уборка урожая",
    // Социальные события
    "ожидание гостей из соседней деревни",
    "подготовка к деревенскому празднику",
    "встреча с соседями за чаем",
    "помощь односельчанам с работой",
    "обсуждение последних новостей с путниками",
    "сбор на деревенском сходе",
    "подготовка к свадьбе",
    "встреча с дальними родственниками",
    "проводы в армию",
    "встреча новорожденного"
];

// Новые массивы для деталей внутреннего убранства
const wallDecor = [
    "старые фотографии в деревянных рамках",
    "вышитые рушники",
    "охотничьи трофеи",
    "иконы и обереги",
    "картины с пейзажами",
    "семейные портреты",
    "плетёные венки из трав",
    "часы с кукушкой",
    "резные деревянные панно",
    "старинные карты местности"
];

const shelfItems = [
    "глиняные горшки с засушенными травами",
    "банки с вареньем и соленьями",
    "деревянные ложки и миски",
    "стопки книг и тетрадей",
    "корзины с клубками пряжи",
    "бутылки с настойками",
    "свечи и подсвечники",
    "коробки с пуговицами и лентами",
    "маленькие статуэтки животных",
    "плетёные корзинки с орехами"
];

const windowsillItems = [
    "горшки с цветами",
    "луковицы и чеснок на просушке",
    "маленькие фигурки из дерева",
    "бутылочки с разноцветными жидкостями",
    "пучки свежих трав",
    "куклы-обереги",
    "камушки и ракушки",
    "плетёные корзинки с ягодами",
    "маленькие свечи",
    "глиняные фигурки птиц"
];

const smells = [
    "свежеиспечённым хлебом",
    "сушёными травами",
    "дымком из печи",
    "яблоками и мёдом",
    "тёплым молоком",
    "лесными грибами",
    "свежей выпечкой",
    "цветами с огорода",
    "мёдом и воском",
    "древесиной и смолой"
];

const floorItems = [
    "домотканые половики",
    "шерстяные ковры",
    "соломенные циновки",
    "вышитые дорожки",
    "старые шкуры животных",
    "цветные лоскутные коврики",
    "деревянные дощечки",
    "плетёные коврики",
    "ковёр с геометрическим узором",
    "полосатые половики"
];

const tableItems = [
    "вышитые салфетки",
    "глиняный кувшин с молоком",
    "корзина с хлебом",
    "миска с фруктами",
    "деревянная солонка",
    "тарелка с пирогами",
    "стопка тарелок и ложек",
    "ваза с полевыми цветами",
    "банка с мёдом",
    "кувшин с компотом"
];

const cornerItems = [
    "большая печь с лежанкой, на которой аккуратно сложены лоскутные одеяла",
    "сундук с вышитыми полотенцами",
    "прялка и мотки пряжи",
    "старая скамья с подушками",
    "детская кроватка",
    "столярный верстак",
    "полка с книгами и письмами",
    "ящик с инструментами",
    "кресло-качалка",
    "корзина с яблоками"
];

// Пример структуры для взаимосвязанных вариантов (на примере нескольких профессий)
const professionThemes = {
    "пекарь": {
        contents: [
            "печь с горячими пирогами и хлебом",
            "полки с буханками хлеба и булочками",
            "мешки с мукой и специями",
            "стол с тестом и скалкой",
            "корзины с выпечкой для гостей"
        ],
        features: [
            "большая печь с дымоходом",
            "стол для замеса теста",
            "полки с формами для выпечки"
        ],
        smells: [
            "свежеиспечённым хлебом",
            "ванилью и корицей",
            "дрожжами и тестом"
        ],
        events: [
            "выпечка хлеба для всей деревни",
            "приготовление праздничного пирога",
            "замес теста на утро"
        ],
        loot: [
            {name: 'корзина с булочками', value: '5 см'},
            {name: 'мешочек с мукой', value: '3 см'},
            {name: 'рецепт семейного пирога', value: '10 см'},
            {name: 'банка с дрожжами', value: '2 см'},
            {name: 'скалка', value: '4 см'},
            {name: 'форма для выпечки', value: '6 см'},
            {name: 'банка с вареньем', value: '5 см'},
            {name: 'редкий сорт мёда', value: '8 см'},
            {name: 'старинная кулинарная книга', value: '12 зм'},
            {name: 'мешочек с маком', value: '2 см'},
            {name: 'коробка с пряностями', value: '8 см'},
            {name: 'старый фартук', value: '1 см'},
            {name: 'маленький нож для теста', value: '3 см'},
            {name: 'записка с тайным рецептом', value: '5 см'},
            {name: 'кулон в виде хлеба', value: '7 зм'},
            {name: 'магический порошок для выпечки', value: '10 зм'},
            {name: 'запечатанная банка с закваской', value: '6 см'},
            {name: 'серебряная ложка для сахара', value: '7 см'},
            {name: 'маленькая бутылочка с ликёром', value: '9 см'},
            {name: 'редкая специя из далёких стран', value: '15 зм'},
            {name: 'книга с рецептами пирогов', value: '8 зм'},
            {name: 'старый деревянный поднос', value: '2 см'},
            {name: 'мешочек с изюмом', value: '3 см'},
            {name: 'маленькая фигурка булки', value: '2 см'},
            {name: 'записка с благодарностью от клиента', value: '1 см'},
            {name: 'магический амулет для удачной выпечки', value: '20 зм'}
        ]
    },
    "травник": {
        contents: [
            "полки с сушёными травами и корнями",
            "банки с зельями и настойками",
            "стол с пучками свежих растений",
            "корзины с грибами и ягодами",
            "ящики с редкими семенами"
        ],
        features: [
            "сушилка для трав",
            "стол для приготовления зелий",
            "шкаф с банками и склянками"
        ],
        smells: [
            "сушёными травами и цветами",
            "лекарственными настоями",
            "мёдом и пыльцой"
        ],
        events: [
            "сбор лекарственных трав",
            "приготовление нового зелья",
            "приём больного односельчанина"
        ],
        loot: [
            {name: 'мешочек с сушёными травами', value: '4 см'},
            {name: 'бутылочка с настойкой', value: '7 см'},
            {name: 'коробка с семенами', value: '5 см'},
            {name: 'книга по травничеству', value: '1 зм'},
            {name: 'пучок редких растений', value: '10 см'},
            {name: 'банка с мазью', value: '8 см'},
            {name: 'травяной амулет', value: '3 см'}
        ]
    },
    "кузнец": {
        contents: [
            "наковальня и инструменты для ковки",
            "полки с железными заготовками",
            "стол с молотками и клещами",
            "ящики с подковами и гвоздями",
            "кусачки и напильники на стене"
        ],
        features: [
            "кузница с горном",
            "ковочный стол",
            "полка с образцами стали"
        ],
        smells: [
            "раскалённым железом и углём",
            "смазкой и маслом",
            "дымом и металлом"
        ],
        events: [
            "ковка нового меча",
            "починка подковы для лошади",
            "ремонт инструментов односельчан"
        ],
        loot: [
            {name: 'железный гвоздь необычной формы', value: '2 см'},
            {name: 'маленький молот', value: '7 см'},
            {name: 'кусачки', value: '5 см'},
            {name: 'старый подков', value: '3 см'},
            {name: 'образец стали', value: '8 см'},
            {name: 'книга по кузнечному делу', value: '1 зм'},
            {name: 'железное кольцо', value: '4 см'}
        ]
    },
    // ... добавить остальные профессии ...
};

// Универсальные массивы для случайных профессий
const genericContents = [
    "простая деревянная мебель и сундуки с одеждой",
    "стол с посудой и кувшином воды",
    "полки с книгами и безделушками",
    "корзины с овощами и фруктами",
    "старый комод с семейными реликвиями"
];
const genericFeatures = [
    "печь с лежанкой",
    "чердак с сундуками",
    "погреб с запасами",
    "мастерская в пристройке",
    "сад с цветами и травами"
];
const genericSmells = [
    "свежеиспечённым хлебом",
    "сушёными травами",
    "дымком из печи",
    "яблоками и мёдом",
    "лесными грибами"
];
const genericEvents = [
    "семейный ужин",
    "ремонт забора",
    "дети играют во дворе",
    "гости издалека",
    "праздник урожая"
];
const genericLoot = [
    {name: 'старинная монета', value: '5 зм'},
    {name: 'зелье лечения', value: '2 зм'},
    {name: 'простая праща', value: '8 см'},
    {name: 'нож с костяной рукоятью', value: '1 зм'},
    {name: 'маленький мешочек с самоцветом', value: '10 зм'},
    {name: 'амулет от сглаза', value: '2 зм'},
    {name: 'ключ от неизвестного сундука', value: '3 см'},
    {name: 'старый дневник с картой', value: '1 зм'},
    {name: 'пара золотых серёг', value: '15 зм'},
    {name: 'мешочек с пуговицами', value: '1 см'},
    {name: 'серебряная ложка', value: '7 см'},
    {name: 'маленькая бутылочка с синей жидкостью', value: '3 зм'},
    {name: 'книга с заклинаниями для новичков', value: '5 зм'},
    {name: 'старый компас', value: '2 зм'},
    {name: 'карта окрестностей', value: '1 зм'},
    {name: 'кольцо с гравировкой', value: '8 зм'},
    {name: 'флакон духов', value: '6 см'},
    {name: 'кулон с янтарём', value: '12 зм'},
    {name: 'маленький мешочек с золотым песком', value: '10 зм'},
    {name: 'игральные кости', value: '2 см'},
    {name: 'магический кристалл (слабый)', value: '15 зм'},
    {name: 'старый медальон', value: '4 зм'},
    {name: 'бутылка редкого вина', value: '10 зм'},
    {name: 'пачка старых писем', value: '1 зм'},
    {name: 'маленькая статуэтка животного', value: '3 зм'},
    {name: 'поясная сумка', value: '2 зм'},
    {name: 'кожаный кошелёк', value: '3 см'},
    {name: 'маленький фонарь', value: '5 см'},
    {name: 'коробка с редкими специями', value: '7 см'},
    {name: 'записка с загадкой', value: '1 см'},
    {name: 'старый оберег на удачу', value: '2 зм'},
    {name: 'маленький мешочек с серебряной пылью', value: '8 зм'},
    {name: 'книга о местных легендах', value: '3 зм'},
    {name: 'фигурка дракона из дерева', value: '6 зм'},
    {name: 'маленький пузырёк с ядом', value: '5 зм'},
    {name: 'кулон с каплей крови феникса', value: '25 зм'},
    {name: 'магический браслет (слабый)', value: '12 зм'},
    {name: 'старый пергамент с картой сокровищ', value: '10 зм'},
    {name: 'магический амулет удачи', value: '20 зм'},
    {name: 'редкая руна', value: '15 зм'},
    {name: 'зелье бодрости', value: '3 зм'},
    {name: 'магический порошок для маскировки', value: '7 зм'},
    {name: 'старый плащ', value: '4 зм'},
    {name: 'компас с гравировкой', value: '6 зм'},
    {name: 'магический свисток', value: '8 зм'},
    {name: 'редкая маска', value: '10 зм'},
    {name: 'зелье ночного зрения', value: '5 зм'},
    {name: 'старый амулет', value: '3 зм'},
    {name: 'коллекция перьев', value: '2 зм'},
    {name: 'магический нож', value: '9 зм'},
    {name: 'старый медальон с гравировкой', value: '6 зм'},
    {name: 'редкая специя из далёких стран', value: '15 зм'},
    {name: 'магический компас', value: '12 зм'},
    {name: 'записка с благодарностью', value: '1 см'},
    {name: 'старый дневник с заметками', value: '2 зм'},
    {name: 'магический порошок для ковки', value: '10 зм'},
    {name: 'старый ключ', value: '2 см'},
    {name: 'магический шлем', value: '18 зм'},
    {name: 'карта рудников', value: '4 зм'},
    {name: 'коллекция болтов', value: '3 см'},
    {name: 'магический амулет защиты', value: '20 зм'},
    {name: 'старый фолиант', value: '8 зм'},
    {name: 'магический порошок для выпечки', value: '10 зм'},
    {name: 'старый деревянный поднос', value: '2 см'},
    {name: 'магический браслет силы', value: '15 зм'},
    {name: 'зелье стойкости', value: '4 зм'},
    {name: 'магический уголь', value: '7 зм'},
    {name: 'старый фартук', value: '1 см'},
    {name: 'магический мешочек', value: '8 зм'},
    {name: 'старый дневник', value: '2 зм'},
    {name: 'магический нож для сбора трав', value: '9 зм'},
    {name: 'старый медальон с руной', value: '7 зм'},
    {name: 'магический порошок для зелий', value: '11 зм'},
    {name: 'старый амулет от болезней', value: '5 зм'},
    {name: 'магический кристалл (редкий)', value: '25 зм'}
];

// Функция для получения случайных уникальных элементов из массива
function getRandomUniqueElements(array, count) {
    const arr = [...array];
    const result = [];
    for (let i = 0; i < count && arr.length > 0; i++) {
        const idx = Math.floor(Math.random() * arr.length);
        result.push(arr.splice(idx, 1)[0]);
    }
    return result;
}

// Функция генерации дома
function generateHouse() {
    const owner = getRandomElement(ownerTypes);
    const theme = professionThemes[owner.profession];
    // Если есть тема для профессии — используем её, иначе универсальные массивы
    const contents = theme ? getRandomElement(theme.contents) : getRandomElement(genericContents);
    const features = theme ? getRandomElement(theme.features) : getRandomElement(genericFeatures);
    const smell = theme ? getRandomElement(theme.smells) : getRandomElement(genericSmells);
    const events = theme ? getRandomElement(theme.events) : getRandomElement(genericEvents);
    let lootArray = theme ? theme.loot : genericLoot;
    // Добавим шанс на универсальный или ценный лут
    let lootPool = [...lootArray, ...genericLoot];
    const lootCount = 5 + Math.floor(Math.random() * 6);
    const loot = getRandomUniqueElements(lootPool, lootCount);
    return {
        type: getRandomElement(houseTypes),
        condition: getRandomElement(houseConditions),
        owner: owner,
        contents: contents,
        features: features,
        secrets: getRandomElement(houseSecrets),
        events: events,
        wall: getRandomElement(wallDecor),
        shelf: getRandomElement(shelfItems),
        windowsill: getRandomElement(windowsillItems),
        smell: smell,
        floor: getRandomElement(floorItems),
        table: getRandomElement(tableItems),
        corner: getRandomElement(cornerItems),
        loot: loot
    };
}

// Функция отображения дома
function displayHouse(house) {
    // Очищаем предыдущее описание
    const container = dv.container;
    container.innerHTML = '';

    // Создаем кнопку
    const button = dv.el('button', 'Сгенерировать новый дом');
    button.style.padding = '10px 20px';
    button.style.fontSize = '16px';
    button.style.margin = '10px 0';
    button.style.cursor = 'pointer';
    button.style.backgroundColor = '#4CAF50';
    button.style.color = 'white';
    button.style.border = 'none';
    button.style.borderRadius = '4px';
    button.onclick = () => {
        const newHouse = generateHouse();
        displayHouse(newHouse);
    };

    // Формируем лут
    let lootText = house.loot.map(item => `- ${item.name} (${item.value})`).join('\n');

    // Создаем новое описание
    dv.paragraph(`
## Описание деревенского дома

Это ${house.type}. Дом ${house.condition}.

### Хозяин
Дом принадлежит ${house.owner.profession}у, который ${house.owner.details}.

### Внутреннее убранство
Войдя в дом, вы видите ${house.contents}. ${house.features}.
На стенах — ${house.wall}.
На полках — ${house.shelf}.
На подоконниках — ${house.windowsill}.
В воздухе пахнет ${house.smell}.
На полу — ${house.floor}.
На столе — ${house.table}.
В углу — ${house.corner}.

### Интересные подробности
Среди особенностей дома: ${house.secrets}.
Сейчас в доме: ${house.events}.

### Возможный лут
${lootText}
    `);
}

// Генерация и отображение первого дома
const firstHouse = generateHouse();
displayHouse(firstHouse);
```
