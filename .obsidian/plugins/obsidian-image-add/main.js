/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// main.ts
__export(exports, {
  default: () => ImageAddPlugin
});
var import_obsidian = __toModule(require("obsidian"));
var DEFAULT_SETTINGS = {
  defaultSize: 200,
  defaultAlignment: "center"
};
var ImageAddPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("image", "Image Add", () => {
      new ImageAddModal(this.app, this).open();
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ImageAddModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
    this.selectedImage = "";
    this.selectedSize = 200;
    this.selectedAlignment = "center";
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("image-add-modal");
    contentEl.createEl("h2", { text: "Add Image" });
    const selectButton = contentEl.createEl("button", {
      text: "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",
      cls: "mod-cta"
    });
    selectButton.addEventListener("click", async () => {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "image/*";
      input.onchange = async (e) => {
        var _a;
        const file = (_a = e.target.files) == null ? void 0 : _a[0];
        if (!file)
          return;
        const arrayBuffer = await file.arrayBuffer();
        const fileName = file.name;
        try {
          const imagePath = await this.app.vault.createBinary(arrayBuffer, fileName);
          if (imagePath) {
            this.selectedImage = fileName;
            this.updatePreview();
            new import_obsidian.Notice("\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E");
          }
        } catch (error) {
          new import_obsidian.Notice("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F");
          console.error(error);
        }
      };
      input.click();
    });
    const sizeContainer = contentEl.createEl("div", { cls: "setting-item" });
    sizeContainer.createEl("label", { text: "Size: " });
    const sizeSelect = sizeContainer.createEl("select");
    [100, 150, 200, 250, 300].forEach((size) => {
      const option = sizeSelect.createEl("option", {
        text: size.toString(),
        value: size.toString()
      });
      if (size === this.selectedSize) {
        option.selected = true;
      }
    });
    sizeSelect.addEventListener("change", (e) => {
      this.selectedSize = parseInt(e.target.value);
      this.updatePreview();
    });
    const alignmentContainer = contentEl.createEl("div", { cls: "setting-item" });
    alignmentContainer.createEl("label", { text: "Alignment: " });
    const alignmentSelect = alignmentContainer.createEl("select");
    ["left", "center", "right"].forEach((alignment) => {
      const option = alignmentSelect.createEl("option", {
        text: alignment,
        value: alignment
      });
      if (alignment === this.selectedAlignment) {
        option.selected = true;
      }
    });
    alignmentSelect.addEventListener("change", (e) => {
      this.selectedAlignment = e.target.value;
      this.updatePreview();
    });
    const addButton = contentEl.createEl("button", {
      text: "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",
      cls: "mod-cta"
    });
    addButton.addEventListener("click", () => {
      if (!this.selectedImage) {
        new import_obsidian.Notice("\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (activeView) {
        const editor = activeView.editor;
        const cursor = editor.getCursor();
        const imageText = `![${this.selectedImage}|${this.selectedSize}](${this.selectedImage})`;
        editor.replaceRange(imageText, cursor);
        this.close();
      }
    });
  }
  updatePreview() {
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBJbWFnZUFkZFNldHRpbmdzIHtcclxuICAgIGRlZmF1bHRTaXplOiBudW1iZXI7XHJcbiAgICBkZWZhdWx0QWxpZ25tZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEltYWdlQWRkU2V0dGluZ3MgPSB7XHJcbiAgICBkZWZhdWx0U2l6ZTogMjAwLFxyXG4gICAgZGVmYXVsdEFsaWdubWVudDogJ2NlbnRlcidcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VBZGRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IEltYWdlQWRkU2V0dGluZ3M7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIC8vIFx1MDQxNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzQlx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0MzhcdTA0M0FcdTA0M0VcdTA0M0RcdTA0M0FcdTA0NDMgXHUwNDMyIFx1MDQzMVx1MDQzRVx1MDQzQVx1MDQzRVx1MDQzMlx1MDQ0M1x1MDQ0RSBcdTA0M0ZcdTA0MzBcdTA0M0RcdTA0MzVcdTA0M0JcdTA0NENcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2ltYWdlJywgJ0ltYWdlIEFkZCcsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IEltYWdlQWRkTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEltYWdlQWRkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSW1hZ2U6IHN0cmluZyA9ICcnO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFNpemU6IG51bWJlciA9IDIwMDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRBbGlnbm1lbnQ6IHN0cmluZyA9ICdjZW50ZXInO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1hZ2VBZGRQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdpbWFnZS1hZGQtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnQWRkIEltYWdlJ30pO1xyXG5cclxuICAgICAgICAvLyBcdTA0MUFcdTA0M0RcdTA0M0VcdTA0M0ZcdTA0M0FcdTA0MzAgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwXHUwNDMwIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgICAgIGNvbnN0IHNlbGVjdEJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnXHUwNDEyXHUwNDRCXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNScsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbGVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gXHUwNDIxXHUwNDNFXHUwNDM3XHUwNDM0XHUwNDMwXHUwNDM1XHUwNDNDIFx1MDQzRFx1MDQzNVx1MDQzMlx1MDQzOFx1MDQzNFx1MDQzOFx1MDQzQ1x1MDQ0Qlx1MDQzOSBpbnB1dCBcdTA0MzRcdTA0M0JcdTA0NEYgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwXHUwNDMwIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzMFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XHJcbiAgICAgICAgICAgIGlucHV0LmFjY2VwdCA9ICdpbWFnZS8qJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXM/LlswXTtcclxuICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzNVx1MDQzQyBcdTA0MzJcdTA0NDBcdTA0MzVcdTA0M0NcdTA0MzVcdTA0M0RcdTA0M0RcdTA0NEJcdTA0MzkgVVJMIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0JcdTA0MzBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1MDQyMVx1MDQzRVx1MDQ0NVx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0IgXHUwNDMyIFx1MDQ0NVx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzQlx1MDQzOFx1MDQ0OVx1MDQzNSBPYnNpZGlhblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVBhdGggPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVCaW5hcnkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5QnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW1hZ2UgPSBmaWxlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MDQxOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNSBcdTA0NDNcdTA0NDFcdTA0M0ZcdTA0MzVcdTA0NDhcdTA0M0RcdTA0M0UgXHUwNDM0XHUwNDNFXHUwNDMxXHUwNDMwXHUwNDMyXHUwNDNCXHUwNDM1XHUwNDNEXHUwNDNFJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTA0MUVcdTA0NDhcdTA0MzhcdTA0MzFcdTA0M0FcdTA0MzAgXHUwNDNGXHUwNDQwXHUwNDM4IFx1MDQzNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzOCBcdTA0MzhcdTA0MzdcdTA0M0VcdTA0MzFcdTA0NDBcdTA0MzBcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEYnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlucHV0LmNsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1MDQxMlx1MDQ0Qlx1MDQzMVx1MDQzRVx1MDQ0MCBcdTA0NDBcdTA0MzBcdTA0MzdcdTA0M0NcdTA0MzVcdTA0NDBcdTA0MzBcclxuICAgICAgICBjb25zdCBzaXplQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnc2V0dGluZy1pdGVtJ30pO1xyXG4gICAgICAgIHNpemVDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge3RleHQ6ICdTaXplOiAnfSk7XHJcbiAgICAgICAgY29uc3Qgc2l6ZVNlbGVjdCA9IHNpemVDb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcpO1xyXG4gICAgICAgIFsxMDAsIDE1MCwgMjAwLCAyNTAsIDMwMF0uZm9yRWFjaChzaXplID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gc2l6ZVNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogc2l6ZS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHNpemUudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHNpemUgPT09IHRoaXMuc2VsZWN0ZWRTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNpemVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFNpemUgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1MDQxMlx1MDQ0Qlx1MDQzMVx1MDQzRVx1MDQ0MCBcdTA0NDBcdTA0MzBcdTA0NDFcdTA0M0ZcdTA0M0VcdTA0M0JcdTA0M0VcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEZcclxuICAgICAgICBjb25zdCBhbGlnbm1lbnRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtjbHM6ICdzZXR0aW5nLWl0ZW0nfSk7XHJcbiAgICAgICAgYWxpZ25tZW50Q29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHt0ZXh0OiAnQWxpZ25tZW50OiAnfSk7XHJcbiAgICAgICAgY29uc3QgYWxpZ25tZW50U2VsZWN0ID0gYWxpZ25tZW50Q29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICBbJ2xlZnQnLCAnY2VudGVyJywgJ3JpZ2h0J10uZm9yRWFjaChhbGlnbm1lbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBhbGlnbm1lbnRTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGFsaWdubWVudCxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBhbGlnbm1lbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChhbGlnbm1lbnQgPT09IHRoaXMuc2VsZWN0ZWRBbGlnbm1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWxpZ25tZW50U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRBbGlnbm1lbnQgPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHUwNDFBXHUwNDNEXHUwNDNFXHUwNDNGXHUwNDNBXHUwNDMwIFx1MDQzNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnXHUwNDE0XHUwNDNFXHUwNDMxXHUwNDMwXHUwNDMyXHUwNDM4XHUwNDQyXHUwNDRDJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRJbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUwNDIxXHUwNDNEXHUwNDMwXHUwNDQ3XHUwNDMwXHUwNDNCXHUwNDMwIFx1MDQzMlx1MDQ0Qlx1MDQzMVx1MDQzNVx1MDQ0MFx1MDQzOFx1MDQ0Mlx1MDQzNSBcdTA0MzhcdTA0MzdcdTA0M0VcdTA0MzFcdTA0NDBcdTA0MzBcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuICAgICAgICAgICAgICAgIC8vIFx1MDQxOFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQ0Q1x1MDQzN1x1MDQ0M1x1MDQzNVx1MDQzQyBcdTA0M0ZcdTA0NDBcdTA0MzBcdTA0MzJcdTA0MzhcdTA0M0JcdTA0NENcdTA0M0RcdTA0NEJcdTA0MzkgXHUwNDQ0XHUwNDNFXHUwNDQwXHUwNDNDXHUwNDMwXHUwNDQyIFx1MDQzNFx1MDQzQlx1MDQ0RiBcdTA0MzhcdTA0MzdcdTA0M0VcdTA0MzFcdTA0NDBcdTA0MzBcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0NEZcclxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlVGV4dCA9IGAhWyR7dGhpcy5zZWxlY3RlZEltYWdlfXwke3RoaXMuc2VsZWN0ZWRTaXplfV0oJHt0aGlzLnNlbGVjdGVkSW1hZ2V9KWA7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGltYWdlVGV4dCwgY3Vyc29yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByZXZpZXcoKSB7XHJcbiAgICAgICAgLy8gXHUwNDE3XHUwNDM0XHUwNDM1XHUwNDQxXHUwNDRDIFx1MDQzQ1x1MDQzRVx1MDQzNlx1MDQzRFx1MDQzRSBcdTA0MzRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0MzhcdTA0NDJcdTA0NEMgXHUwNDNGXHUwNDQwXHUwNDM1XHUwNDM0XHUwNDNGXHUwNDQwXHUwNDNFXHUwNDQxXHUwNDNDXHUwNDNFXHUwNDQyXHUwNDQwIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59ICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFtRztBQU9uRyxJQUFNLG1CQUFxQztBQUFBLEVBQ3ZDLGFBQWE7QUFBQSxFQUNiLGtCQUFrQjtBQUFBO0FBR3RCLG1DQUE0Qyx1QkFBTztBQUFBLFFBR3pDLFNBQVM7QUFDWCxVQUFNLEtBQUs7QUFHWCxTQUFLLGNBQWMsU0FBUyxhQUFhLE1BQU07QUFDM0MsVUFBSSxjQUFjLEtBQUssS0FBSyxNQUFNO0FBQUE7QUFBQTtBQUFBLFFBSXBDLGVBQWU7QUFDakIsU0FBSyxXQUFXLE9BQU8sT0FBTyxJQUFJLGtCQUFrQixNQUFNLEtBQUs7QUFBQTtBQUFBLFFBRzdELGVBQWU7QUFDakIsVUFBTSxLQUFLLFNBQVMsS0FBSztBQUFBO0FBQUE7QUFJakMsa0NBQTRCLHNCQUFNO0FBQUEsRUFLOUIsWUFBWSxLQUFrQixRQUF3QjtBQUNsRCxVQUFNO0FBRG9CO0FBSnRCLHlCQUF3QjtBQUN4Qix3QkFBdUI7QUFDdkIsNkJBQTRCO0FBQUE7QUFBQSxFQU1wQyxTQUFTO0FBQ0wsVUFBTSxFQUFDLGNBQWE7QUFDcEIsY0FBVTtBQUNWLGNBQVUsU0FBUztBQUVuQixjQUFVLFNBQVMsTUFBTSxFQUFDLE1BQU07QUFHaEMsVUFBTSxlQUFlLFVBQVUsU0FBUyxVQUFVO0FBQUEsTUFDOUMsTUFBTTtBQUFBLE1BQ04sS0FBSztBQUFBO0FBR1QsaUJBQWEsaUJBQWlCLFNBQVMsWUFBWTtBQUUvQyxZQUFNLFFBQVEsU0FBUyxjQUFjO0FBQ3JDLFlBQU0sT0FBTztBQUNiLFlBQU0sU0FBUztBQUVmLFlBQU0sV0FBVyxPQUFPLE1BQU07QUE3RDFDO0FBOERnQixjQUFNLE9BQVEsUUFBRSxPQUE0QixVQUE5QixtQkFBc0M7QUFDcEQsWUFBSSxDQUFDO0FBQU07QUFHWCxjQUFNLGNBQWMsTUFBTSxLQUFLO0FBQy9CLGNBQU0sV0FBVyxLQUFLO0FBR3RCLFlBQUk7QUFDQSxnQkFBTSxZQUFZLE1BQU0sS0FBSyxJQUFJLE1BQU0sYUFDbkMsYUFDQTtBQUdKLGNBQUksV0FBVztBQUNYLGlCQUFLLGdCQUFnQjtBQUNyQixpQkFBSztBQUNMLGdCQUFJLHVCQUFPO0FBQUE7QUFBQSxpQkFFVixPQUFQO0FBQ0UsY0FBSSx1QkFBTztBQUNYLGtCQUFRLE1BQU07QUFBQTtBQUFBO0FBSXRCLFlBQU07QUFBQTtBQUlWLFVBQU0sZ0JBQWdCLFVBQVUsU0FBUyxPQUFPLEVBQUMsS0FBSztBQUN0RCxrQkFBYyxTQUFTLFNBQVMsRUFBQyxNQUFNO0FBQ3ZDLFVBQU0sYUFBYSxjQUFjLFNBQVM7QUFDMUMsS0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssUUFBUSxVQUFRO0FBQ3RDLFlBQU0sU0FBUyxXQUFXLFNBQVMsVUFBVTtBQUFBLFFBQ3pDLE1BQU0sS0FBSztBQUFBLFFBQ1gsT0FBTyxLQUFLO0FBQUE7QUFFaEIsVUFBSSxTQUFTLEtBQUssY0FBYztBQUM1QixlQUFPLFdBQVc7QUFBQTtBQUFBO0FBSTFCLGVBQVcsaUJBQWlCLFVBQVUsQ0FBQyxNQUFNO0FBQ3pDLFdBQUssZUFBZSxTQUFVLEVBQUUsT0FBNkI7QUFDN0QsV0FBSztBQUFBO0FBSVQsVUFBTSxxQkFBcUIsVUFBVSxTQUFTLE9BQU8sRUFBQyxLQUFLO0FBQzNELHVCQUFtQixTQUFTLFNBQVMsRUFBQyxNQUFNO0FBQzVDLFVBQU0sa0JBQWtCLG1CQUFtQixTQUFTO0FBQ3BELEtBQUMsUUFBUSxVQUFVLFNBQVMsUUFBUSxlQUFhO0FBQzdDLFlBQU0sU0FBUyxnQkFBZ0IsU0FBUyxVQUFVO0FBQUEsUUFDOUMsTUFBTTtBQUFBLFFBQ04sT0FBTztBQUFBO0FBRVgsVUFBSSxjQUFjLEtBQUssbUJBQW1CO0FBQ3RDLGVBQU8sV0FBVztBQUFBO0FBQUE7QUFJMUIsb0JBQWdCLGlCQUFpQixVQUFVLENBQUMsTUFBTTtBQUM5QyxXQUFLLG9CQUFxQixFQUFFLE9BQTZCO0FBQ3pELFdBQUs7QUFBQTtBQUlULFVBQU0sWUFBWSxVQUFVLFNBQVMsVUFBVTtBQUFBLE1BQzNDLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQTtBQUdULGNBQVUsaUJBQWlCLFNBQVMsTUFBTTtBQUN0QyxVQUFJLENBQUMsS0FBSyxlQUFlO0FBQ3JCLFlBQUksdUJBQU87QUFDWDtBQUFBO0FBR0osWUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLG9CQUFvQjtBQUMxRCxVQUFJLFlBQVk7QUFDWixjQUFNLFNBQVMsV0FBVztBQUMxQixjQUFNLFNBQVMsT0FBTztBQUV0QixjQUFNLFlBQVksS0FBSyxLQUFLLGlCQUFpQixLQUFLLGlCQUFpQixLQUFLO0FBQ3hFLGVBQU8sYUFBYSxXQUFXO0FBQy9CLGFBQUs7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtqQixnQkFBZ0I7QUFBQTtBQUFBLEVBSWhCLFVBQVU7QUFDTixVQUFNLEVBQUMsY0FBYTtBQUNwQixjQUFVO0FBQUE7QUFBQTsiLAogICJuYW1lcyI6IFtdCn0K
