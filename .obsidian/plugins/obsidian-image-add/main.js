/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// main.ts
__export(exports, {
  default: () => ImageAddPlugin
});
var import_obsidian = __toModule(require("obsidian"));
var DEFAULT_SETTINGS = {
  defaultSize: 200,
  defaultAlignment: "center"
};
var ImageAddPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addRibbonIcon("image", "Image Add", () => {
      new ImageAddModal(this.app, this).open();
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ImageAddModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
    this.selectedImage = "";
    this.selectedSize = 200;
    this.selectedAlignment = "center";
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("image-add-modal");
    contentEl.createEl("h2", { text: "Add Image" });
    const selectButton = contentEl.createEl("button", {
      text: "\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",
      cls: "mod-cta"
    });
    selectButton.addEventListener("click", async () => {
      const input = document.createElement("input");
      input.type = "file";
      input.accept = "image/*";
      input.onchange = async (e) => {
        var _a;
        const file = (_a = e.target.files) == null ? void 0 : _a[0];
        if (!file)
          return;
        try {
          const reader = new FileReader();
          reader.onload = async (event) => {
            var _a2;
            if (!((_a2 = event.target) == null ? void 0 : _a2.result))
              return;
            const dataUrl = event.target.result;
            const timestamp = new Date().getTime();
            const fileName = `${timestamp}_${file.name}`;
            try {
              await this.app.vault.create(fileName, dataUrl);
              this.selectedImage = fileName;
              this.updatePreview();
              new import_obsidian.Notice("\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E");
            } catch (error) {
              new import_obsidian.Notice("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0438 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F");
              console.error(error);
            }
          };
          reader.readAsDataURL(file);
        } catch (error) {
          new import_obsidian.Notice("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0447\u0442\u0435\u043D\u0438\u0438 \u0444\u0430\u0439\u043B\u0430");
          console.error(error);
        }
      };
      input.click();
    });
    const sizeContainer = contentEl.createEl("div", { cls: "setting-item" });
    sizeContainer.createEl("label", { text: "Size: " });
    const sizeSelect = sizeContainer.createEl("select");
    [100, 150, 200, 250, 300].forEach((size) => {
      const option = sizeSelect.createEl("option", {
        text: size.toString(),
        value: size.toString()
      });
      if (size === this.selectedSize) {
        option.selected = true;
      }
    });
    sizeSelect.addEventListener("change", (e) => {
      this.selectedSize = parseInt(e.target.value);
      this.updatePreview();
    });
    const alignmentContainer = contentEl.createEl("div", { cls: "setting-item" });
    alignmentContainer.createEl("label", { text: "Alignment: " });
    const alignmentSelect = alignmentContainer.createEl("select");
    ["left", "center", "right"].forEach((alignment) => {
      const option = alignmentSelect.createEl("option", {
        text: alignment,
        value: alignment
      });
      if (alignment === this.selectedAlignment) {
        option.selected = true;
      }
    });
    alignmentSelect.addEventListener("change", (e) => {
      this.selectedAlignment = e.target.value;
      this.updatePreview();
    });
    const addButton = contentEl.createEl("button", {
      text: "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",
      cls: "mod-cta"
    });
    addButton.addEventListener("click", () => {
      if (!this.selectedImage) {
        new import_obsidian.Notice("\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (activeView) {
        const editor = activeView.editor;
        const cursor = editor.getCursor();
        const imageText = `![${this.selectedImage}|${this.selectedSize}](${this.selectedImage})`;
        editor.replaceRange(imageText, cursor);
        this.close();
      }
    });
  }
  updatePreview() {
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBJbWFnZUFkZFNldHRpbmdzIHtcclxuICAgIGRlZmF1bHRTaXplOiBudW1iZXI7XHJcbiAgICBkZWZhdWx0QWxpZ25tZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEltYWdlQWRkU2V0dGluZ3MgPSB7XHJcbiAgICBkZWZhdWx0U2l6ZTogMjAwLFxyXG4gICAgZGVmYXVsdEFsaWdubWVudDogJ2NlbnRlcidcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VBZGRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IEltYWdlQWRkU2V0dGluZ3M7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIC8vIFx1MDQxNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzQlx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0MzhcdTA0M0FcdTA0M0VcdTA0M0RcdTA0M0FcdTA0NDMgXHUwNDMyIFx1MDQzMVx1MDQzRVx1MDQzQVx1MDQzRVx1MDQzMlx1MDQ0M1x1MDQ0RSBcdTA0M0ZcdTA0MzBcdTA0M0RcdTA0MzVcdTA0M0JcdTA0NENcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2ltYWdlJywgJ0ltYWdlIEFkZCcsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IEltYWdlQWRkTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEltYWdlQWRkTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwcml2YXRlIHNlbGVjdGVkSW1hZ2U6IHN0cmluZyA9ICcnO1xyXG4gICAgcHJpdmF0ZSBzZWxlY3RlZFNpemU6IG51bWJlciA9IDIwMDtcclxuICAgIHByaXZhdGUgc2VsZWN0ZWRBbGlnbm1lbnQ6IHN0cmluZyA9ICdjZW50ZXInO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIHBsdWdpbjogSW1hZ2VBZGRQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICBjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdpbWFnZS1hZGQtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnQWRkIEltYWdlJ30pO1xyXG5cclxuICAgICAgICAvLyBcdTA0MUFcdTA0M0RcdTA0M0VcdTA0M0ZcdTA0M0FcdTA0MzAgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwXHUwNDMwIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgICAgIGNvbnN0IHNlbGVjdEJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnXHUwNDEyXHUwNDRCXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDQyXHUwNDRDIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNScsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbGVjdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgLy8gXHUwNDIxXHUwNDNFXHUwNDM3XHUwNDM0XHUwNDMwXHUwNDM1XHUwNDNDIFx1MDQzRFx1MDQzNVx1MDQzMlx1MDQzOFx1MDQzNFx1MDQzOFx1MDQzQ1x1MDQ0Qlx1MDQzOSBpbnB1dCBcdTA0MzRcdTA0M0JcdTA0NEYgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwXHUwNDMwIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzMFxyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XHJcbiAgICAgICAgICAgIGlucHV0LmFjY2VwdCA9ICdpbWFnZS8qJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXM/LlswXTtcclxuICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHUwNDI3XHUwNDM4XHUwNDQyXHUwNDMwXHUwNDM1XHUwNDNDIFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQiBcdTA0M0FcdTA0MzBcdTA0M0EgRGF0YSBVUkxcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQ/LnJlc3VsdCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHUwNDFGXHUwNDNFXHUwNDNCXHUwNDQzXHUwNDQ3XHUwNDMwXHUwNDM1XHUwNDNDIERhdGEgVVJMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSBldmVudC50YXJnZXQucmVzdWx0IGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1MDQyMVx1MDQzRVx1MDQzN1x1MDQzNFx1MDQzMFx1MDQzNVx1MDQzQyBcdTA0MzhcdTA0M0NcdTA0NEYgXHUwNDQ0XHUwNDMwXHUwNDM5XHUwNDNCXHUwNDMwIFx1MDQ0MSBcdTA0NDNcdTA0M0RcdTA0MzhcdTA0M0FcdTA0MzBcdTA0M0JcdTA0NENcdTA0M0RcdTA0NEJcdTA0M0MgXHUwNDM4XHUwNDM0XHUwNDM1XHUwNDNEXHUwNDQyXHUwNDM4XHUwNDQ0XHUwNDM4XHUwNDNBXHUwNDMwXHUwNDQyXHUwNDNFXHUwNDQwXHUwNDNFXHUwNDNDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke3RpbWVzdGFtcH1fJHtmaWxlLm5hbWV9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1MDQyMVx1MDQzRVx1MDQ0NVx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQ0Rlx1MDQzNVx1MDQzQyBcdTA0NDRcdTA0MzBcdTA0MzlcdTA0M0IgXHUwNDMyIFx1MDQ0NVx1MDQ0MFx1MDQzMFx1MDQzRFx1MDQzOFx1MDQzQlx1MDQzOFx1MDQ0OVx1MDQzNSBPYnNpZGlhblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFVcmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbWFnZSA9IGZpbGVOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTA0MThcdTA0MzdcdTA0M0VcdTA0MzFcdTA0NDBcdTA0MzBcdTA0MzZcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzUgXHUwNDQzXHUwNDQxXHUwNDNGXHUwNDM1XHUwNDQ4XHUwNDNEXHUwNDNFIFx1MDQzNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzQlx1MDQzNVx1MDQzRFx1MDQzRScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHUwNDFFXHUwNDQ4XHUwNDM4XHUwNDMxXHUwNDNBXHUwNDMwIFx1MDQzRlx1MDQ0MFx1MDQzOCBcdTA0NDFcdTA0M0VcdTA0NDVcdTA0NDBcdTA0MzBcdTA0M0RcdTA0MzVcdTA0M0RcdTA0MzhcdTA0MzggXHUwNDM4XHUwNDM3XHUwNDNFXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDM2XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDRGJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1MDQxRVx1MDQ0OFx1MDQzOFx1MDQzMVx1MDQzQVx1MDQzMCBcdTA0M0ZcdTA0NDBcdTA0MzggXHUwNDQ3XHUwNDQyXHUwNDM1XHUwNDNEXHUwNDM4XHUwNDM4IFx1MDQ0NFx1MDQzMFx1MDQzOVx1MDQzQlx1MDQzMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW5wdXQuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHUwNDEyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwIFx1MDQ0MFx1MDQzMFx1MDQzN1x1MDQzQ1x1MDQzNVx1MDQ0MFx1MDQzMFxyXG4gICAgICAgIGNvbnN0IHNpemVDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtjbHM6ICdzZXR0aW5nLWl0ZW0nfSk7XHJcbiAgICAgICAgc2l6ZUNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7dGV4dDogJ1NpemU6ICd9KTtcclxuICAgICAgICBjb25zdCBzaXplU2VsZWN0ID0gc2l6ZUNvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgWzEwMCwgMTUwLCAyMDAsIDI1MCwgMzAwXS5mb3JFYWNoKHNpemUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBzaXplU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzaXplLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogc2l6ZS50b1N0cmluZygpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoc2l6ZSA9PT0gdGhpcy5zZWxlY3RlZFNpemUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2l6ZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2l6ZSA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHUwNDEyXHUwNDRCXHUwNDMxXHUwNDNFXHUwNDQwIFx1MDQ0MFx1MDQzMFx1MDQ0MVx1MDQzRlx1MDQzRVx1MDQzQlx1MDQzRVx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgICAgIGNvbnN0IGFsaWdubWVudENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ3NldHRpbmctaXRlbSd9KTtcclxuICAgICAgICBhbGlnbm1lbnRDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge3RleHQ6ICdBbGlnbm1lbnQ6ICd9KTtcclxuICAgICAgICBjb25zdCBhbGlnbm1lbnRTZWxlY3QgPSBhbGlnbm1lbnRDb250YWluZXIuY3JlYXRlRWwoJ3NlbGVjdCcpO1xyXG4gICAgICAgIFsnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnXS5mb3JFYWNoKGFsaWdubWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGFsaWdubWVudFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYWxpZ25tZW50LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGFsaWdubWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGFsaWdubWVudCA9PT0gdGhpcy5zZWxlY3RlZEFsaWdubWVudCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbGlnbm1lbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEFsaWdubWVudCA9IChlLnRhcmdldCBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTA0MUFcdTA0M0RcdTA0M0VcdTA0M0ZcdTA0M0FcdTA0MzAgXHUwNDM0XHUwNDNFXHUwNDMxXHUwNDMwXHUwNDMyXHUwNDNCXHUwNDM1XHUwNDNEXHUwNDM4XHUwNDRGXHJcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdcdTA0MTRcdTA0M0VcdTA0MzFcdTA0MzBcdTA0MzJcdTA0MzhcdTA0NDJcdTA0NEMnLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZEltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTA0MjFcdTA0M0RcdTA0MzBcdTA0NDdcdTA0MzBcdTA0M0JcdTA0MzAgXHUwNDMyXHUwNDRCXHUwNDMxXHUwNDM1XHUwNDQwXHUwNDM4XHUwNDQyXHUwNDM1IFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQzNScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZVZpZXcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgLy8gXHUwNDE4XHUwNDQxXHUwNDNGXHUwNDNFXHUwNDNCXHUwNDRDXHUwNDM3XHUwNDQzXHUwNDM1XHUwNDNDIFx1MDQzRlx1MDQ0MFx1MDQzMFx1MDQzMlx1MDQzOFx1MDQzQlx1MDQ0Q1x1MDQzRFx1MDQ0Qlx1MDQzOSBcdTA0NDRcdTA0M0VcdTA0NDBcdTA0M0NcdTA0MzBcdTA0NDIgXHUwNDM0XHUwNDNCXHUwNDRGIFx1MDQzOFx1MDQzN1x1MDQzRVx1MDQzMVx1MDQ0MFx1MDQzMFx1MDQzNlx1MDQzNVx1MDQzRFx1MDQzOFx1MDQ0RlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VUZXh0ID0gYCFbJHt0aGlzLnNlbGVjdGVkSW1hZ2V9fCR7dGhpcy5zZWxlY3RlZFNpemV9XSgke3RoaXMuc2VsZWN0ZWRJbWFnZX0pYDtcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW1hZ2VUZXh0LCBjdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlUHJldmlldygpIHtcclxuICAgICAgICAvLyBcdTA0MTdcdTA0MzRcdTA0MzVcdTA0NDFcdTA0NEMgXHUwNDNDXHUwNDNFXHUwNDM2XHUwNDNEXHUwNDNFIFx1MDQzNFx1MDQzRVx1MDQzMVx1MDQzMFx1MDQzMlx1MDQzOFx1MDQ0Mlx1MDQ0QyBcdTA0M0ZcdTA0NDBcdTA0MzVcdTA0MzRcdTA0M0ZcdTA0NDBcdTA0M0VcdTA0NDFcdTA0M0NcdTA0M0VcdTA0NDJcdTA0NDAgXHUwNDM4XHUwNDM3XHUwNDNFXHUwNDMxXHUwNDQwXHUwNDMwXHUwNDM2XHUwNDM1XHUwNDNEXHUwNDM4XHUwNDRGXHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0gIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW1HO0FBT25HLElBQU0sbUJBQXFDO0FBQUEsRUFDdkMsYUFBYTtBQUFBLEVBQ2Isa0JBQWtCO0FBQUE7QUFHdEIsbUNBQTRDLHVCQUFPO0FBQUEsUUFHekMsU0FBUztBQUNYLFVBQU0sS0FBSztBQUdYLFNBQUssY0FBYyxTQUFTLGFBQWEsTUFBTTtBQUMzQyxVQUFJLGNBQWMsS0FBSyxLQUFLLE1BQU07QUFBQTtBQUFBO0FBQUEsUUFJcEMsZUFBZTtBQUNqQixTQUFLLFdBQVcsT0FBTyxPQUFPLElBQUksa0JBQWtCLE1BQU0sS0FBSztBQUFBO0FBQUEsUUFHN0QsZUFBZTtBQUNq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
